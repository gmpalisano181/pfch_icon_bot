# pfch_icon_bot

wimmelbuch (german, lit. "teeming book"): A collection of full-spread drawings, typified by their busy focus and intricate detail. Popularized
by Dutch and Netherlandish Renaissance artists such as Hieronymus Bosch and Pieter Bruegel.

===ABOUT===
This github repository contains all of the documentation that was used for the creation of ICON_bot, a twitter bot which can be located at the 
following url: https://twitter.com/wimmelbuch.

The purpose of the project is to provide visual accompaniments to randomly-selected notations derived from Iconclass, using the Rijksmuseum's 
digital collection. Iconclass is a hierarchical, semi-faceted classification system currently maintained by the Netherlands Institute for Art 
History. The data generated by this code supplies content to a twitter bot which updates its status three times per day.


===COMPONENTS===
The repository consists of six files:

<ic_reader.py> - This python script converts a raw .ndjson file containing all of Iconclass into a usable .json array. All 1.5 million 
    permutations currently possible under Iconclass's current headings are extracted and arranged as a list in a single output file. This 
    makes the data usable for the other files in the repository.

<rijks_inv_req.py> - This python script extracts the entirety of the digital collection made available through the Rijksmuseum's API. The 
    script's output is a directory of .json files, wherein each file corresponds to the full metadata for each object in the collection. This 
    script is not actually necessary for the finished process and has been substituted with a standard API request. However, iterating through 
    a local directory instead of making requests does contribute to optimizing speed and performance. If this code runs, the output's filepath
    will create the directory in the /data folder.

<rijks_dir_reader.py> - This python script converts the entire directory created by the previous script into a single .json file that only 
    includes the most pertinent details about each object, with respect to the selection process. This stripped-down output file is essential to 
    optimal performance, since the selection process may have to iterate through the entire collection several hundred times before it finds a 
    suitable match.

The above three scripts each only need to be run once, unless more current information is desired to reflect future updates made to either 
Iconclass or the Rijksmuseum API. The following two scripts are run each time the ICON_bot updates its status.

<data_generator.py> - This python script is central element of the process. It will generate a pseudo-random notation drawn from the 
    ic_reader.py output file, and then iterate through the entire directory of objects looking for matches. Any matches will be added to a list. 
    If the code loops through the entire inventory without finding any matches, it will start over. When it completes a loop with one or more 
    items added to the list, it will perform another pseudo-random selection to generate the chosen item for the tweet. The script will then 
    extract structured data from the object's full metadata and feed it into three output files: writing a temporary file (overwritten each time 
    the script runs), appending an archive file (which contains information about every time this script was successfully run), and downloading a 
    temporary image (this will also be overwritten each time the script runs).

<tweet_generator.py> - This python script takes the temporary file produced by data_generator.py and utilizes the content to generate text strings 
    which are subsequently used for a status update. The script has three outputs: a tweet, which includes an uploaded image, and two subtweets. 
    The script forces a 10 second pause between each one so that there is time for the tweet to post before the process searches for it in order to 
    subtweet it. 

<twitter_text_archive.json> - A formatted .json file that will initially have no data in it. This file will be appended with process metadata each 
    time data_generator.py successfully generates an Iconclass notation and finds one more matching objects from the inventory. This file does not 
    serve an explicit purpose for ICON_bot but could be used for future explorations of the data.


===CONTACT===
Any questions or concerns about the contents of the repository or the bot itself can be directed to gmpalisano@gmail.com


